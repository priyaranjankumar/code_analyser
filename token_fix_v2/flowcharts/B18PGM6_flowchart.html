
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B18PGM6 - Flowchart</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        .header h1 {
            color: #333;
            margin: 0;
            font-size: 2.5em;
        }
        .header p {
            color: #666;
            margin: 10px 0 0 0;
            font-size: 1.1em;
        }
        .flow-description {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #007bff;
        }
        .flow-description h3 {
            margin-top: 0;
            color: #495057;
        }
        .flow-description p {
            margin: 10px 0;
            line-height: 1.6;
        }
        .flowchart-container {
            width: 100%;
            height: 700px;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
            background: #fafafa;
        }
        .node {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .node:hover {
            filter: brightness(1.1);
        }
        .node-text {
            font-size: 11px;
            font-weight: bold;
            text-anchor: middle;
            dominant-baseline: middle;
            fill: white;
            pointer-events: none;
        }
        .node-description {
            font-size: 10px;
            fill: #333;
            text-anchor: middle;
            dominant-baseline: middle;
            pointer-events: none;
        }
        .link {
            stroke: #666;
            stroke-width: 2;
            fill: none;
            marker-end: url(#arrowhead);
        }
        .link-label {
            font-size: 10px;
            fill: #666;
            text-anchor: middle;
            dominant-baseline: middle;
            pointer-events: none;
        }
        .controls {
            margin: 20px 0;
            text-align: center;
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        .btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        .btn-secondary {
            background: #6c757d;
        }
        .btn-secondary:hover {
            background: #545b62;
        }
        .btn-success {
            background: #28a745;
        }
        .btn-success:hover {
            background: #1e7e34;
        }
        .zoom-info {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 1000;
        }
        .fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 9999;
            background: white;
        }
        .fullscreen .container {
            max-width: none;
            height: 100vh;
            margin: 0;
            border-radius: 0;
        }
        .fullscreen .flowchart-container {
            height: calc(100vh - 200px);
        }
        .fullscreen .controls {
            position: sticky;
            top: 0;
            background: white;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
            z-index: 1000;
        }
        .legend {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .legend h4 {
            margin-top: 0;
            color: #495057;
        }
        .legend-item {
            display: inline-block;
            margin: 5px 15px 5px 0;
            font-size: 12px;
        }
        .legend-color {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 3px;
            margin-right: 5px;
            vertical-align: middle;
        }
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            max-width: 300px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>B18PGM6</h1>
            <p>Program Flowchart - Interactive Visualization</p>
        </div>
        
        
        <div class="flow-description">
            <h3>Program Flow Overview</h3>
            <p><strong>Main Flow:</strong> Program flow analysis from LLM</p>
            
            <p><strong>Key Decision Points:</strong> Key decision points identified</p>
            
            
            <p><strong>Loops and Iterations:</strong> Loop structures found</p>
            
            
            <p><strong>Error Handling:</strong> Error handling mechanisms</p>
            
        </div>
        
        
        <div class="legend">
            <h4>Node Types</h4>
            <div class="legend-item">
                <span class="legend-color" style="background: #28a745;"></span>
                <span>Start/End</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #007bff;"></span>
                <span>Process</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #ffc107;"></span>
                <span>Decision</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #fd7e14;"></span>
                <span>Input/Output</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #6f42c1;"></span>
                <span>Procedure Call</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #20c997;"></span>
                <span>Loop</span>
            </div>
        </div>
        
        <div class="legend">
            <h4>Interactive Controls</h4>
            <div style="font-size: 12px; color: #666; line-height: 1.6;">
                <strong>Mouse:</strong> Drag to pan, Scroll wheel to zoom<br>
                <strong>Keyboard:</strong> +/= (zoom in), - (zoom out), 0 (reset), F (fit to screen), Esc (exit fullscreen)<br>
                <strong>Hover:</strong> Over nodes to see detailed information
            </div>
        </div>
        
        <div class="controls">
            <button class="btn btn-secondary" onclick="zoomIn()">üîç Zoom In</button>
            <button class="btn btn-secondary" onclick="zoomOut()">üîç Zoom Out</button>
            <button class="btn btn-secondary" onclick="resetZoom()">üîÑ Reset</button>
            <button class="btn btn-success" onclick="fitToScreen()">üìê Fit to Screen</button>
            <button class="btn" onclick="toggleFullscreen()">‚õ∂ Fullscreen</button>
            <button class="btn btn-secondary" onclick="downloadSVG()">üíæ Download SVG</button>
        </div>
        
        <div class="zoom-info" id="zoomInfo" style="display: none;">
            Zoom: <span id="zoomLevel">100%</span>
        </div>
        
        <div class="flowchart-container" id="flowchart"></div>
    </div>
    
    <div class="tooltip" id="tooltip" style="display: none;"></div>
    
    <script>
        // Flowchart data
        const flowchartData = {"nodes": [{"id": "node_0", "label": "START", "type": "START", "description": "Program initialization", "business_logic": "Program entry point", "line_number": 1}, {"id": "node_1", "label": "IF", "type": "DECISION", "description": "IF ( LS-READ-FLAG NOT = 2 ) THEN", "business_logic": "Validate data or make business decision", "line_number": 31}, {"id": "node_2", "label": "Decision", "type": "DECISION", "description": "IF: ( LS-READ-FLAG NOT = 2 ) THEN", "business_logic": "Business logic decision point", "line_number": 31}, {"id": "node_3", "label": "MOVE", "type": "PROCESS", "description": "MOVE LOW-VALUES TO DONREPOO", "business_logic": "Assign data to variable", "line_number": 32}, {"id": "node_4", "label": "END-IF", "type": "PROCESS", "description": "END-IF", "business_logic": "Process data", "line_number": 33}, {"id": "node_5", "label": "2000-SEND-", "type": "CALL", "description": "PERFORM 2000-SEND-MAP-PARA", "business_logic": "Display login screen to user", "line_number": 37}, {"id": "node_6", "label": "3000-KEY-V", "type": "CALL", "description": "PERFORM 3000-KEY-VALIDATION-PARA", "business_logic": "Validate user credentials", "line_number": 39}, {"id": "node_7", "label": "2000-SEND-", "type": "CALL", "description": "PERFORM 2000-SEND-MAP-PARA", "business_logic": "Display login screen to user", "line_number": 40}, {"id": "node_8", "label": "5000-MAP-F", "type": "CALL", "description": "PERFORM 5000-MAP-FAILED-PARA", "business_logic": "Execute business logic procedure", "line_number": 61}, {"id": "node_9", "label": "5100-ERROR", "type": "CALL", "description": "PERFORM 5100-ERROR-MSG-PARA", "business_logic": "Execute business logic procedure", "line_number": 63}, {"id": "node_10", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'CREATE' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 68}, {"id": "node_11", "label": "MOVE", "type": "PROCESS", "description": "MOVE LOW-VALUES TO DONREPOO", "business_logic": "Assign data to variable", "line_number": 69}, {"id": "node_12", "label": "MOVE", "type": "PROCESS", "description": "MOVE -1 TO DONNAMEL", "business_logic": "Initialize user ID field", "line_number": 70}, {"id": "node_13", "label": "MOVE", "type": "PROCESS", "description": "MOVE DFHBMPRO TO DONIDA", "business_logic": "Assign data to variable", "line_number": 71}, {"id": "node_14", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'ENTER DETAILS TO SAVE' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 72}, {"id": "node_15", "label": "2000-SEND-", "type": "CALL", "description": "PERFORM 2000-SEND-MAP-PARA", "business_logic": "Display login screen to user", "line_number": 73}, {"id": "node_16", "label": "MOVE", "type": "PROCESS", "description": "MOVE 1 TO WS-FLAG", "business_logic": "Assign data to variable", "line_number": 74}, {"id": "node_17", "label": "MOVE", "type": "PROCESS", "description": "MOVE 0 TO WS-READ-FLAG", "business_logic": "Assign data to variable", "line_number": 75}, {"id": "node_18", "label": "IF", "type": "DECISION", "description": "IF ( WS-READ-FLAG NOT = 2 ) THEN", "business_logic": "Validate data or make business decision", "line_number": 77}, {"id": "node_19", "label": "Decision", "type": "DECISION", "description": "IF: ( WS-READ-FLAG NOT = 2 ) THEN", "business_logic": "Business logic decision point", "line_number": 77}, {"id": "node_20", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE VIEW FIRST' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 78}, {"id": "node_21", "label": "ELSE", "type": "PROCESS", "description": "ELSE", "business_logic": "Process data", "line_number": 79}, {"id": "node_22", "label": "MOVE", "type": "PROCESS", "description": "MOVE 2 TO WS-FLAG", "business_logic": "Assign data to variable", "line_number": 80}, {"id": "node_23", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'VIEW SUCCESSFUL' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 81}, {"id": "node_24", "label": "END-IF", "type": "PROCESS", "description": "END-IF", "business_logic": "Process data", "line_number": 82}, {"id": "node_25", "label": "MOVE", "type": "PROCESS", "description": "MOVE LOW-VALUES TO DONREPOO", "business_logic": "Assign data to variable", "line_number": 88}, {"id": "node_26", "label": "MOVE", "type": "PROCESS", "description": "MOVE -1 TO DONIDL", "business_logic": "Initialize user ID field", "line_number": 89}, {"id": "node_27", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'ENTER DONORID TO VIEW' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 90}, {"id": "node_28", "label": "2000-SEND-", "type": "CALL", "description": "PERFORM 2000-SEND-MAP-PARA", "business_logic": "Display login screen to user", "line_number": 91}, {"id": "node_29", "label": "MOVE", "type": "PROCESS", "description": "MOVE 4 TO WS-FLAG", "business_logic": "Assign data to variable", "line_number": 92}, {"id": "node_30", "label": "2100-RECEI", "type": "CALL", "description": "PERFORM 2100-RECEIVE-MAP-PARA", "business_logic": "Execute business logic procedure", "line_number": 96}, {"id": "node_31", "label": "3100-DATA-", "type": "CALL", "description": "PERFORM 3100-DATA-VALIDATION-PARA", "business_logic": "Validate user credentials", "line_number": 97}, {"id": "node_32", "label": "2100-RECEI", "type": "CALL", "description": "PERFORM 2100-RECEIVE-MAP-PARA", "business_logic": "Execute business logic procedure", "line_number": 99}, {"id": "node_33", "label": "3100-DATA-", "type": "CALL", "description": "PERFORM 3100-DATA-VALIDATION-PARA", "business_logic": "Validate user credentials", "line_number": 100}, {"id": "node_34", "label": "2100-RECEI", "type": "CALL", "description": "PERFORM 2100-RECEIVE-MAP-PARA", "business_logic": "Execute business logic procedure", "line_number": 102}, {"id": "node_35", "label": "3100-DATA-", "type": "CALL", "description": "PERFORM 3100-DATA-VALIDATION-PARA", "business_logic": "Validate user credentials", "line_number": 103}, {"id": "node_36", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE CHOOSE ANY OPTION FIRST' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 105}, {"id": "node_37", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'INVALID KEY PRESSED' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 108}, {"id": "node_38", "label": "INPUT-DATA", "type": "CALL", "description": "PERFORM INPUT-DATA-VALIDATION", "business_logic": "Validate user credentials", "line_number": 113}, {"id": "node_39", "label": "WRITE-TO-D", "type": "CALL", "description": "PERFORM WRITE-TO-DB-PARA", "business_logic": "Execute business logic procedure", "line_number": 115}, {"id": "node_40", "label": "END-IF", "type": "PROCESS", "description": "END-IF", "business_logic": "Process data", "line_number": 116}, {"id": "node_41", "label": "INPUT-DATA", "type": "CALL", "description": "PERFORM INPUT-DATA-VALIDATION", "business_logic": "Validate user credentials", "line_number": 118}, {"id": "node_42", "label": "UPDATE-TO-", "type": "CALL", "description": "PERFORM UPDATE-TO-DB-PARA", "business_logic": "Execute business logic procedure", "line_number": 120}, {"id": "node_43", "label": "END-IF", "type": "PROCESS", "description": "END-IF", "business_logic": "Process data", "line_number": 121}, {"id": "node_44", "label": "MOVE", "type": "PROCESS", "description": "MOVE -1 TO DONIDL", "business_logic": "Initialize user ID field", "line_number": 125}, {"id": "node_45", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER DONORID' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 126}, {"id": "node_46", "label": "MOVE", "type": "PROCESS", "description": "MOVE -1 TO DONIDL", "business_logic": "Initialize user ID field", "line_number": 128}, {"id": "node_47", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'DONORID CANNOT BE BLANK' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 129}, {"id": "node_48", "label": "IF", "type": "DECISION", "description": "IF DONIDI IS NUMERIC THEN", "business_logic": "Validate data or make business decision", "line_number": 131}, {"id": "node_49", "label": "Decision", "type": "DECISION", "description": "IF: DONIDI IS NUMERIC THEN", "business_logic": "Business logic decision point", "line_number": 131}, {"id": "node_50", "label": "READ-DONOR", "type": "CALL", "description": "PERFORM READ-DONOR-PARA", "business_logic": "Execute business logic procedure", "line_number": 132}, {"id": "node_51", "label": "ELSE", "type": "PROCESS", "description": "ELSE", "business_logic": "Process data", "line_number": 133}, {"id": "node_52", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'INVALID PATIENT ID' TO PMSGO", "business_logic": "Assign data to variable", "line_number": 134}, {"id": "node_53", "label": "END-IF", "type": "PROCESS", "description": "END-IF", "business_logic": "Process data", "line_number": 135}, {"id": "node_54", "label": "MOVE", "type": "PROCESS", "description": "MOVE  DB-DONOR-ID TO WS-TEMP", "business_logic": "Assign data to variable", "line_number": 172}, {"id": "node_55", "label": "MOVE", "type": "PROCESS", "description": "MOVE  WS-TEMP(4:) TO DONIDO", "business_logic": "Assign data to variable", "line_number": 173}, {"id": "node_56", "label": "MOVE", "type": "PROCESS", "description": "MOVE  DB-DONOR-NAME TO DONNAMEO", "business_logic": "Assign data to variable", "line_number": 174}, {"id": "node_57", "label": "MOVE", "type": "PROCESS", "description": "MOVE  DB-DONOR-ADD-ZIPCD TO DONZIPO", "business_logic": "Assign data to variable", "line_number": 189}, {"id": "node_58", "label": "MOVE", "type": "PROCESS", "description": "MOVE  DB-DONOR-GENDER      TO DONGENO", "business_logic": "Assign data to variable", "line_number": 190}, {"id": "node_59", "label": "MOVE", "type": "PROCESS", "description": "MOVE  DB-DONOR-CONTACT-NUM TO DONCNUMO", "business_logic": "Assign data to variable", "line_number": 191}, {"id": "node_60", "label": "MOVE", "type": "PROCESS", "description": "MOVE  DB-DONOR-BLOOD-GROUP TO BLDGRPO", "business_logic": "Assign data to variable", "line_number": 192}, {"id": "node_61", "label": "MOVE", "type": "PROCESS", "description": "MOVE 2 TO WS-READ-FLAG", "business_logic": "Assign data to variable", "line_number": 193}, {"id": "node_62", "label": "MOVE", "type": "PROCESS", "description": "MOVE LOW-VALUES TO DONREPOO", "business_logic": "Assign data to variable", "line_number": 195}, {"id": "node_63", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'DONOR ID IS INVALIED' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 196}, {"id": "node_64", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO DONNAMEL", "business_logic": "Initialize user ID field", "line_number": 236}, {"id": "node_65", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER NAME' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 237}, {"id": "node_66", "label": "MOVE", "type": "PROCESS", "description": "MOVE -1 TO DONNAMEL", "business_logic": "Initialize user ID field", "line_number": 239}, {"id": "node_67", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER CORRECT NAME' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 240}, {"id": "node_68", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO BLDGRPL", "business_logic": "Initialize user ID field", "line_number": 242}, {"id": "node_69", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER CORRECT BLOODGROUP' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 243}, {"id": "node_70", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO BLDGRPL", "business_logic": "Initialize user ID field", "line_number": 246}, {"id": "node_71", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER CORRECT BLOODGROUP' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 247}, {"id": "node_72", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO DONADDL", "business_logic": "Initialize user ID field", "line_number": 249}, {"id": "node_73", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER ADDRESS' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 250}, {"id": "node_74", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO DONADDL", "business_logic": "Initialize user ID field", "line_number": 252}, {"id": "node_75", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER STREET' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 253}, {"id": "node_76", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO DONADDL", "business_logic": "Initialize user ID field", "line_number": 255}, {"id": "node_77", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER STREET1' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 256}, {"id": "node_78", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO DONADD1L", "business_logic": "Initialize user ID field", "line_number": 258}, {"id": "node_79", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER ADDRESS IN 2ND LINE' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 259}, {"id": "node_80", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO DONADD1L", "business_logic": "Initialize user ID field", "line_number": 261}, {"id": "node_81", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER STREET2' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 262}, {"id": "node_82", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO DONADD1L", "business_logic": "Initialize user ID field", "line_number": 264}, {"id": "node_83", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER CITY' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 265}, {"id": "node_84", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO DONADD2L", "business_logic": "Initialize user ID field", "line_number": 267}, {"id": "node_85", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER ADDRESS IN 3RD LINE' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 268}, {"id": "node_86", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO DONADD2L", "business_logic": "Initialize user ID field", "line_number": 270}, {"id": "node_87", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER STATE' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 271}, {"id": "node_88", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO DONADD2L", "business_logic": "Initialize user ID field", "line_number": 273}, {"id": "node_89", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER COUNTRY' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 274}, {"id": "node_90", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO DONZIPL", "business_logic": "Initialize user ID field", "line_number": 276}, {"id": "node_91", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER ZIP CODE' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 277}, {"id": "node_92", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO DONZIPL", "business_logic": "Initialize user ID field", "line_number": 279}, {"id": "node_93", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER CORRECT ZIP CODE' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 280}, {"id": "node_94", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO DONGENL", "business_logic": "Initialize user ID field", "line_number": 282}, {"id": "node_95", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER CORRECT GENDER' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 283}, {"id": "node_96", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO DONCNUML", "business_logic": "Initialize user ID field", "line_number": 285}, {"id": "node_97", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER CONTACT NUMBER' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 286}, {"id": "node_98", "label": "MOVE", "type": "PROCESS", "description": "MOVE   -1 TO DONCNUML", "business_logic": "Initialize user ID field", "line_number": 288}, {"id": "node_99", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'PLEASE ENTER CORRECT CONTACT NUMBER' TO DONM...", "business_logic": "Assign data to variable", "line_number": 289}, {"id": "node_100", "label": "MOVE", "type": "PROCESS", "description": "MOVE DONNAMEI TO DB-DONOR-NAME", "business_logic": "Assign data to variable", "line_number": 291}, {"id": "node_101", "label": "MOVE", "type": "PROCESS", "description": "MOVE DONZIPI TO DB-DONOR-ADD-ZIPCD", "business_logic": "Assign data to variable", "line_number": 292}, {"id": "node_102", "label": "MOVE", "type": "PROCESS", "description": "MOVE DONGENI TO DB-DONOR-GENDER", "business_logic": "Assign data to variable", "line_number": 293}, {"id": "node_103", "label": "MOVE", "type": "PROCESS", "description": "MOVE DONCNUMI TO DB-DONOR-CONTACT-NUM", "business_logic": "Assign data to variable", "line_number": 294}, {"id": "node_104", "label": "MOVE", "type": "PROCESS", "description": "MOVE BLDGRPI TO DB-DONOR-BLOOD-GROUP", "business_logic": "Assign data to variable", "line_number": 295}, {"id": "node_105", "label": "MOVE", "type": "PROCESS", "description": "MOVE 1 TO WS-VALID-DATA-FLAG", "business_logic": "Assign data to variable", "line_number": 296}, {"id": "node_106", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'WRITTEN SUCCESSFULLY' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 327}, {"id": "node_107", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'ERROR WHILE WRITING' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 329}, {"id": "node_108", "label": "MOVE", "type": "PROCESS", "description": "MOVE 0 TO WS-READ-FLAG", "business_logic": "Assign data to variable", "line_number": 355}, {"id": "node_109", "label": "MOVE", "type": "PROCESS", "description": "MOVE 0 TO WS-FLAG", "business_logic": "Assign data to variable", "line_number": 356}, {"id": "node_110", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'UPDATE SUCCESSFULLY' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 357}, {"id": "node_111", "label": "MOVE", "type": "PROCESS", "description": "MOVE 'ERROR WHILE UPDATING' TO DONMSGO", "business_logic": "Assign data to variable", "line_number": 359}, {"id": "node_112", "label": "END", "type": "END", "description": "Program completion", "business_logic": "Program termination", "line_number": 306}], "links": [{"source": "node_0", "target": "node_1", "label": "", "type": "NORMAL"}, {"source": "node_1", "target": "node_2", "label": "True", "type": "CONDITION_TRUE"}, {"source": "node_2", "target": "node_3", "label": "", "type": "NORMAL"}, {"source": "node_3", "target": "node_4", "label": "", "type": "NORMAL"}, {"source": "node_4", "target": "node_5", "label": "", "type": "NORMAL"}, {"source": "node_5", "target": "node_6", "label": "", "type": "NORMAL"}, {"source": "node_6", "target": "node_7", "label": "", "type": "NORMAL"}, {"source": "node_7", "target": "node_8", "label": "", "type": "NORMAL"}, {"source": "node_8", "target": "node_9", "label": "", "type": "NORMAL"}, {"source": "node_9", "target": "node_10", "label": "", "type": "NORMAL"}, {"source": "node_10", "target": "node_11", "label": "", "type": "NORMAL"}, {"source": "node_11", "target": "node_12", "label": "", "type": "NORMAL"}, {"source": "node_12", "target": "node_13", "label": "", "type": "NORMAL"}, {"source": "node_13", "target": "node_14", "label": "", "type": "NORMAL"}, {"source": "node_14", "target": "node_15", "label": "", "type": "NORMAL"}, {"source": "node_15", "target": "node_16", "label": "", "type": "NORMAL"}, {"source": "node_16", "target": "node_17", "label": "", "type": "NORMAL"}, {"source": "node_17", "target": "node_18", "label": "", "type": "NORMAL"}, {"source": "node_18", "target": "node_19", "label": "True", "type": "CONDITION_TRUE"}, {"source": "node_19", "target": "node_20", "label": "", "type": "NORMAL"}, {"source": "node_20", "target": "node_21", "label": "", "type": "NORMAL"}, {"source": "node_21", "target": "node_22", "label": "", "type": "NORMAL"}, {"source": "node_22", "target": "node_23", "label": "", "type": "NORMAL"}, {"source": "node_23", "target": "node_24", "label": "", "type": "NORMAL"}, {"source": "node_24", "target": "node_25", "label": "", "type": "NORMAL"}, {"source": "node_25", "target": "node_26", "label": "", "type": "NORMAL"}, {"source": "node_26", "target": "node_27", "label": "", "type": "NORMAL"}, {"source": "node_27", "target": "node_28", "label": "", "type": "NORMAL"}, {"source": "node_28", "target": "node_29", "label": "", "type": "NORMAL"}, {"source": "node_29", "target": "node_30", "label": "", "type": "NORMAL"}, {"source": "node_30", "target": "node_31", "label": "", "type": "NORMAL"}, {"source": "node_31", "target": "node_32", "label": "", "type": "NORMAL"}, {"source": "node_32", "target": "node_33", "label": "", "type": "NORMAL"}, {"source": "node_33", "target": "node_34", "label": "", "type": "NORMAL"}, {"source": "node_34", "target": "node_35", "label": "", "type": "NORMAL"}, {"source": "node_35", "target": "node_36", "label": "", "type": "NORMAL"}, {"source": "node_36", "target": "node_37", "label": "", "type": "NORMAL"}, {"source": "node_37", "target": "node_38", "label": "", "type": "NORMAL"}, {"source": "node_38", "target": "node_39", "label": "", "type": "NORMAL"}, {"source": "node_39", "target": "node_40", "label": "", "type": "NORMAL"}, {"source": "node_40", "target": "node_41", "label": "", "type": "NORMAL"}, {"source": "node_41", "target": "node_42", "label": "", "type": "NORMAL"}, {"source": "node_42", "target": "node_43", "label": "", "type": "NORMAL"}, {"source": "node_43", "target": "node_44", "label": "", "type": "NORMAL"}, {"source": "node_44", "target": "node_45", "label": "", "type": "NORMAL"}, {"source": "node_45", "target": "node_46", "label": "", "type": "NORMAL"}, {"source": "node_46", "target": "node_47", "label": "", "type": "NORMAL"}, {"source": "node_47", "target": "node_48", "label": "", "type": "NORMAL"}, {"source": "node_48", "target": "node_49", "label": "True", "type": "CONDITION_TRUE"}, {"source": "node_49", "target": "node_50", "label": "", "type": "NORMAL"}, {"source": "node_50", "target": "node_51", "label": "", "type": "NORMAL"}, {"source": "node_51", "target": "node_52", "label": "", "type": "NORMAL"}, {"source": "node_52", "target": "node_53", "label": "", "type": "NORMAL"}, {"source": "node_53", "target": "node_54", "label": "", "type": "NORMAL"}, {"source": "node_54", "target": "node_55", "label": "", "type": "NORMAL"}, {"source": "node_55", "target": "node_56", "label": "", "type": "NORMAL"}, {"source": "node_56", "target": "node_57", "label": "", "type": "NORMAL"}, {"source": "node_57", "target": "node_58", "label": "", "type": "NORMAL"}, {"source": "node_58", "target": "node_59", "label": "", "type": "NORMAL"}, {"source": "node_59", "target": "node_60", "label": "", "type": "NORMAL"}, {"source": "node_60", "target": "node_61", "label": "", "type": "NORMAL"}, {"source": "node_61", "target": "node_62", "label": "", "type": "NORMAL"}, {"source": "node_62", "target": "node_63", "label": "", "type": "NORMAL"}, {"source": "node_63", "target": "node_64", "label": "", "type": "NORMAL"}, {"source": "node_64", "target": "node_65", "label": "", "type": "NORMAL"}, {"source": "node_65", "target": "node_66", "label": "", "type": "NORMAL"}, {"source": "node_66", "target": "node_67", "label": "", "type": "NORMAL"}, {"source": "node_67", "target": "node_68", "label": "", "type": "NORMAL"}, {"source": "node_68", "target": "node_69", "label": "", "type": "NORMAL"}, {"source": "node_69", "target": "node_70", "label": "", "type": "NORMAL"}, {"source": "node_70", "target": "node_71", "label": "", "type": "NORMAL"}, {"source": "node_71", "target": "node_72", "label": "", "type": "NORMAL"}, {"source": "node_72", "target": "node_73", "label": "", "type": "NORMAL"}, {"source": "node_73", "target": "node_74", "label": "", "type": "NORMAL"}, {"source": "node_74", "target": "node_75", "label": "", "type": "NORMAL"}, {"source": "node_75", "target": "node_76", "label": "", "type": "NORMAL"}, {"source": "node_76", "target": "node_77", "label": "", "type": "NORMAL"}, {"source": "node_77", "target": "node_78", "label": "", "type": "NORMAL"}, {"source": "node_78", "target": "node_79", "label": "", "type": "NORMAL"}, {"source": "node_79", "target": "node_80", "label": "", "type": "NORMAL"}, {"source": "node_80", "target": "node_81", "label": "", "type": "NORMAL"}, {"source": "node_81", "target": "node_82", "label": "", "type": "NORMAL"}, {"source": "node_82", "target": "node_83", "label": "", "type": "NORMAL"}, {"source": "node_83", "target": "node_84", "label": "", "type": "NORMAL"}, {"source": "node_84", "target": "node_85", "label": "", "type": "NORMAL"}, {"source": "node_85", "target": "node_86", "label": "", "type": "NORMAL"}, {"source": "node_86", "target": "node_87", "label": "", "type": "NORMAL"}, {"source": "node_87", "target": "node_88", "label": "", "type": "NORMAL"}, {"source": "node_88", "target": "node_89", "label": "", "type": "NORMAL"}, {"source": "node_89", "target": "node_90", "label": "", "type": "NORMAL"}, {"source": "node_90", "target": "node_91", "label": "", "type": "NORMAL"}, {"source": "node_91", "target": "node_92", "label": "", "type": "NORMAL"}, {"source": "node_92", "target": "node_93", "label": "", "type": "NORMAL"}, {"source": "node_93", "target": "node_94", "label": "", "type": "NORMAL"}, {"source": "node_94", "target": "node_95", "label": "", "type": "NORMAL"}, {"source": "node_95", "target": "node_96", "label": "", "type": "NORMAL"}, {"source": "node_96", "target": "node_97", "label": "", "type": "NORMAL"}, {"source": "node_97", "target": "node_98", "label": "", "type": "NORMAL"}, {"source": "node_98", "target": "node_99", "label": "", "type": "NORMAL"}, {"source": "node_99", "target": "node_100", "label": "", "type": "NORMAL"}, {"source": "node_100", "target": "node_101", "label": "", "type": "NORMAL"}, {"source": "node_101", "target": "node_102", "label": "", "type": "NORMAL"}, {"source": "node_102", "target": "node_103", "label": "", "type": "NORMAL"}, {"source": "node_103", "target": "node_104", "label": "", "type": "NORMAL"}, {"source": "node_104", "target": "node_105", "label": "", "type": "NORMAL"}, {"source": "node_105", "target": "node_106", "label": "", "type": "NORMAL"}, {"source": "node_106", "target": "node_107", "label": "", "type": "NORMAL"}, {"source": "node_107", "target": "node_108", "label": "", "type": "NORMAL"}, {"source": "node_108", "target": "node_109", "label": "", "type": "NORMAL"}, {"source": "node_109", "target": "node_110", "label": "", "type": "NORMAL"}, {"source": "node_110", "target": "node_111", "label": "", "type": "NORMAL"}, {"source": "node_111", "target": "node_112", "label": "", "type": "NORMAL"}]};
        
        // Global variables for zoom and fullscreen
        let currentZoom = 1;
        let isFullscreen = false;
        
        // Set up SVG
        const container = document.getElementById('flowchart');
        const width = container.clientWidth;
        const height = container.clientHeight;
        
        const svg = d3.select('#flowchart')
            .append('svg')
            .attr('width', width)
            .attr('height', height);
        
        // Create a group for zooming
        const g = svg.append('g');
        
        // Add zoom behavior
        const zoom = d3.zoom()
            .scaleExtent([0.1, 5])
            .on('zoom', (event) => {
                g.attr('transform', event.transform);
                currentZoom = event.transform.k;
                updateZoomInfo();
            });
        
        svg.call(zoom);
        
        // Mouse wheel zoom
        svg.on('wheel', (event) => {
            event.preventDefault();
            const zoomLevel = event.deltaY > 0 ? 0.9 : 1.1;
            const newZoom = currentZoom * zoomLevel;
            
            if (newZoom >= 0.1 && newZoom <= 5) {
                const transform = d3.zoomTransform(svg.node());
                const newTransform = transform.scale(newZoom);
                svg.transition().duration(200).call(zoom.transform, newTransform);
            }
        });
        
        // Add arrow marker
        svg.append('defs').append('marker')
            .attr('id', 'arrowhead')
            .attr('viewBox', '0 -5 10 10')
            .attr('refX', 20)
            .attr('refY', 0)
            .attr('markerWidth', 6)
            .attr('markerHeight', 6)
            .attr('orient', 'auto')
            .append('path')
            .attr('d', 'M0,-5L10,0L0,5')
            .attr('fill', '#666');
        
        // Create force simulation
        const simulation = d3.forceSimulation(flowchartData.nodes)
            .force('link', d3.forceLink(flowchartData.links).id(d => d.id).distance(120))
            .force('charge', d3.forceManyBody().strength(-300))
            .force('center', d3.forceCenter(width / 2, height / 2))
            .force('collision', d3.forceCollide().radius(40));
        
        // Create links
        const link = g.append('g')
            .selectAll('line')
            .data(flowchartData.links)
            .enter().append('line')
            .attr('class', 'link');
        
        // Create link labels
        const linkLabel = g.append('g')
            .selectAll('text')
            .data(flowchartData.links)
            .enter().append('text')
            .attr('class', 'link-label')
            .text(d => d.label || '');
        
        // Create nodes
        const node = g.append('g')
            .selectAll('g')
            .data(flowchartData.nodes)
            .enter().append('g')
            .attr('class', 'node')
            .call(d3.drag()
                .on('start', dragstarted)
                .on('drag', dragged)
                .on('end', dragended));
        
        // Add node circles
        node.append('circle')
            .attr('r', d => d.type === 'DECISION' ? 25 : 20)
            .attr('fill', d => getNodeColor(d.type));
        
        // Add node labels
        node.append('text')
            .attr('class', 'node-text')
            .attr('dy', d => d.type === 'DECISION' ? 0 : 0)
            .text(d => d.label);
        
        // Add node descriptions (smaller text below)
        node.append('text')
            .attr('class', 'node-description')
            .attr('dy', d => d.type === 'DECISION' ? 35 : 30)
            .text(d => d.description ? d.description.substring(0, 15) + '...' : '');
        
        // Add tooltip
        node.on('mouseover', function(event, d) {
            const tooltip = document.getElementById('tooltip');
            tooltip.innerHTML = `
                <strong>${d.label}</strong><br>
                ${d.description || ''}<br>
                ${d.business_logic ? '<br><strong>Business Logic:</strong> ' + d.business_logic : ''}
                ${d.line_number ? '<br><strong>Line:</strong> ' + d.line_number : ''}
            `;
            tooltip.style.display = 'block';
            tooltip.style.left = event.pageX + 10 + 'px';
            tooltip.style.top = event.pageY - 10 + 'px';
        })
        .on('mouseout', function() {
            document.getElementById('tooltip').style.display = 'none';
        });
        
        // Update positions on simulation tick
        simulation.on('tick', () => {
            link
                .attr('x1', d => d.source.x)
                .attr('y1', d => d.source.y)
                .attr('x2', d => d.target.x)
                .attr('y2', d => d.target.y);
            
            linkLabel
                .attr('x', d => (d.source.x + d.target.x) / 2)
                .attr('y', d => (d.source.y + d.target.y) / 2);
            
            node
                .attr('transform', d => `translate(${d.x},${d.y})`);
        });
        
        // Drag functions
        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }
        
        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }
        
        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }
        
        // Utility functions
        function getNodeColor(type) {
            const colors = {
                'START': '#28a745',
                'END': '#28a745',
                'PROCESS': '#007bff',
                'DECISION': '#ffc107',
                'IO': '#fd7e14',
                'CALL': '#6f42c1',
                'LOOP': '#20c997'
            };
            return colors[type] || '#6c757d';
        }
        
        function updateZoomInfo() {
            const zoomInfo = document.getElementById('zoomInfo');
            const zoomLevel = document.getElementById('zoomLevel');
            if (zoomInfo && zoomLevel) {
                zoomLevel.textContent = Math.round(currentZoom * 100) + '%';
                zoomInfo.style.display = currentZoom !== 1 ? 'block' : 'none';
            }
        }
        
        function zoomIn() {
            const newZoom = Math.min(currentZoom * 1.2, 5);
            const transform = d3.zoomTransform(svg.node());
            const newTransform = transform.scale(newZoom);
            svg.transition().duration(300).call(zoom.transform, newTransform);
        }
        
        function zoomOut() {
            const newZoom = Math.max(currentZoom / 1.2, 0.1);
            const transform = d3.zoomTransform(svg.node());
            const newTransform = transform.scale(newZoom);
            svg.transition().duration(300).call(zoom.transform, newTransform);
        }
        
        function resetZoom() {
            svg.transition().duration(500).call(zoom.transform, d3.zoomIdentity);
            simulation.alpha(1).restart();
        }
        
        function fitToScreen() {
            // Get the bounds of all nodes
            const nodes = flowchartData.nodes;
            if (nodes.length === 0) return;
            
            let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;
            
            nodes.forEach(node => {
                if (node.x !== undefined && node.y !== undefined) {
                    minX = Math.min(minX, node.x);
                    minY = Math.min(minY, node.y);
                    maxX = Math.max(maxX, node.x);
                    maxY = Math.max(maxY, node.y);
                }
            });
            
            // Add padding
            const padding = 50;
            minX -= padding;
            minY -= padding;
            maxX += padding;
            maxY += padding;
            
            // Calculate scale and translation
            const graphWidth = maxX - minX;
            const graphHeight = maxY - minY;
            const scale = Math.min(width / graphWidth, height / graphHeight) * 0.8;
            
            const transform = d3.zoomIdentity
                .translate(width / 2 - (minX + graphWidth / 2) * scale, 
                          height / 2 - (minY + graphHeight / 2) * scale)
                .scale(scale);
            
            svg.transition().duration(500).call(zoom.transform, transform);
        }
        
        function toggleFullscreen() {
            const container = document.querySelector('.container');
            const flowchartContainer = document.getElementById('flowchart');
            
            if (!isFullscreen) {
                // Enter fullscreen
                container.classList.add('fullscreen');
                isFullscreen = true;
                
                // Update SVG size
                const newWidth = window.innerWidth;
                const newHeight = window.innerHeight - 200;
                svg.attr('width', newWidth).attr('height', newHeight);
                
                // Update simulation center
                simulation.force('center', d3.forceCenter(newWidth / 2, newHeight / 2));
                simulation.alpha(1).restart();
                
                // Update button text
                event.target.textContent = '‚õ∂ Exit Fullscreen';
            } else {
                // Exit fullscreen
                container.classList.remove('fullscreen');
                isFullscreen = false;
                
                // Restore original size
                const originalWidth = container.clientWidth;
                const originalHeight = 700;
                svg.attr('width', originalWidth).attr('height', originalHeight);
                
                // Update simulation center
                simulation.force('center', d3.forceCenter(originalWidth / 2, originalHeight / 2));
                simulation.alpha(1).restart();
                
                // Update button text
                event.target.textContent = '‚õ∂ Fullscreen';
            }
        }
        
        function downloadSVG() {
            const svgElement = document.querySelector('#flowchart svg');
            const svgData = new XMLSerializer().serializeToString(svgElement);
            const svgBlob = new Blob([svgData], {type: 'image/svg+xml;charset=utf-8'});
            const svgUrl = URL.createObjectURL(svgBlob);
            const downloadLink = document.createElement('a');
            downloadLink.href = svgUrl;
            downloadLink.download = 'B18PGM6_flowchart.svg';
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);
        }
        
        // Keyboard shortcuts
        document.addEventListener('keydown', (event) => {
            if (event.key === '+' || event.key === '=') {
                event.preventDefault();
                zoomIn();
            } else if (event.key === '-') {
                event.preventDefault();
                zoomOut();
            } else if (event.key === '0') {
                event.preventDefault();
                resetZoom();
            } else if (event.key === 'f') {
                event.preventDefault();
                fitToScreen();
            } else if (event.key === 'Escape' && isFullscreen) {
                toggleFullscreen();
            }
        });
    </script>
</body>
</html>
        